---
title: 《编程:隐匿在计算机硬件背后的语言 》的读书笔记
author: chiechie
mathjax: true
date: 2021-06-08 09:09:12
tags:
- 编程
categories: 
- 阅读
---

## 12 二进制加法器

1. 电路中的逻辑门能实现二进制加法。

> 逻辑门是认为设计的一种电路走线，为了映射到逻辑上的加法运算。
> 
> 逻辑门是链接物理世界和信息世界的桥梁，信息世界以逻辑求和为根基，开始构建信息世界的高楼大厦。

## 16 存储器组织

1. 我们习惯于将可能用到的事物先存起来，在需要时将它们取出。从技术角度来讲，这个过程称为先存储后访问。存储器的职责和作用就在于此，它负责保障这两个过程之间信息完好无损。
2. 存储信息都要利用不同种类的存储器。比如，保存文本信息的不二之选就是纸张，而磁带则更适于存储音乐和电影。
3. 电报继电器（Telegraph Relays）——以一定形式组织起来构成逻辑门，然后再形成触发器——同样具备保存信息的能力
4. 随机访问存储器（RAM）一断电，数据就消失了。因此随机访问存储器也叫易失性（volatile）存储器。
   
   > 一个辛辛苦苦装满65,536字节珍贵数据的64 K×8 RAM阵列，如果断掉电源，首先所有的电磁铁都将因为没有电流而失去磁性，随着“梆”的一声，金属片将弹回原位，所有继电器将还原到未触发状态。RAM中存储的数据呢？它们将如风中残烛般消失在黑暗中



## 18 从算盘到芯片


## 19 两种微处理器

1. 微处理器将中央处理器的所有组建整合到一个硅芯片上。
2. 第一个微处理器，intel 4004，包含了2300个晶体管
3. 三十年过去了，一个微处理器中的晶体管数量逼近1000w个。
4. 摩托罗拉公司，从20实际50年代生产半导体和晶体管，在1974年8月推出了6800处理器。
5. 得克萨斯仪器在1974年，推处4位的处理器TMS1000，
6. 英特尔为8080最初定的价格为360美元，8080是一个8位的微处理器，它包括6000个晶体管，运行的时钟频率为2 MHz，寻址空间为64 KB。
7. 这些芯片被称为“单芯片微处理器”（single-chip microprocessors
8. 除了处理器之外，计算机还需要其他一些设备，至少要包括存储器（RAM），输入设备（键盘），输出设备（显示屏），以及其他一些能把所有构件连接在一块的芯片（主板，机箱）。
9. 通过观测芯片的输入、输出信号，特别是芯片的指令集来理解微处理器的工作原理。
10. 微处理器通过管脚提供了处理器的输入和输出访问接入点
![img.png](img.png)
11. 所有电气或电子设备都需要某种电源来供电
12. 8080的一个特殊的地方就是它需要三种电源电压：管脚20必须接到5V的电压；管脚11需要接到-5V的电压；管脚28需接12V的电压；管脚2接地。（英特尔在1976年发布了8085芯片，目的就是简化对这些电源的要求）. 
    
    - 从芯片引出的箭头表明这是一个输出（output）信号，这种信号由微处理器控制，计算机的其他芯片对该信号响应。
    - 指向芯片的箭头表明该信号是一个输入（input）信号，该信号由其他芯片发出，并由8080芯片对其响应。还一些管脚既是输入又是输出。
13. 8080有16个用于寻址的输出信号，标记为A0～A15，因此它的可寻址空间大小为$2^16$
14. 在计算机中，所有的指令都是3个字节长（1个字节=8个bit），包括1字节的操作码和2字节的地址，指令长什么样？：
    
    - 有些指令使8080从存储器的一个特定地址读取字节到微处理器，
    - 有些指令使8080将一个字节从微处理器写入存储器的特定地址；
    - 还有些指令使8080在其内部执行而不需要访问RAM
    
    8080执行完第一条指令后，接着从「存储器」读取第二条指令，并依此类推。这些指令组合在一起构成了计算机程序
15. 计算机的指令集包括两条非常重要的指令，我们称之为加载（Load）和保存（Store），每条指令占3个字节
    
    - 在Load指令中，第一个字节是操作码，其后的两个字节是要加载的操作数的16位地址。当处理器执行加载指令时，会把该指定地址中的字节加载到累加器。
    - 当Store指令被执行时，累加器中的内容被保存到该指令指定的地址中。
16. 8080芯片的微处理器的内部除累加器外还设置了6个寄存器（register），每个寄存器可以存放一个8位的数。这些寄存器和累加器非常相似，事实上累加器被视为一种特殊的寄存器。
17. 寄存器是计算机必不可少的部件吗？理论上不是。很多计算机程序都同时用到多个数据，将这些数据存放在寄存器比存放在存储器更便于访问，因为程序访问内存的次数越少其执行速度就越快。
18. 利用指令，可以方便地把一个寄存器存放的数据转移到另一个寄存器
19. 有一种存储器叫堆栈：以从底部到顶部的顺序把数据存入存储器，并以相反的顺序把数据从堆栈中取出，因此该技术也称作后进先出存储器（last-in-first-out，LIFO）。在计算机中使用堆栈技术是十分方便的。通常把将数据存入堆栈的过程称作压入（push），把从堆栈取出数据的过程称作弹出（pop）。
20. 堆栈的功能是怎样实现的呢？首先，堆栈其实就是一段普通的RAM存储空间，只是这段空间相对独立不另作他用。8080微处理器设置了一个专门的16位寄存器对这段存储空间寻址，这个特殊的寄存器称为堆栈指针（SP，Stack Pointer）。
21. 在8080中，执行PUSH指令实际上是把16位的数据保存到堆栈，执行POP指令是把这些数据从堆栈中取回至寄存器。
22. 每执行一条PUSH指令，堆栈都会增加两个字节，这可能会导致程序出现一些小错误——堆栈可能会不断增大，最终覆盖掉存储器中保存的程序所必需的代码或数据。这种错误被称作堆栈上溢（stackoverflow）。类似的，如果在程序中过多地使用了POP指令，则会过早地取完堆栈中的数据从而导致类似的错误，这种情况称为堆栈下溢（stack underflow）。
23. 根据摩尔定律（Moore’s Law），微处理器中的晶体管数量每18个月翻一倍，增加的这些大量的晶体管用来做什么呢？
    - 一些晶体管用来适应处理器不断增加的数据宽度——从4位、8位、16位到32位；
    - 另一些新增的晶体管用来应对新的指令。
24. 现代处理器主要使用2种策略来提高运行速度:
    
    - 一种就是流水线技术（pipelining），即处理器在执行一条指令的同时读取下一条指令，
    - 还有一种是Cache（高速缓冲存储器），它是一个设置在处理器内部，访问速度非常快的RAM阵列，用来存放处理器最近要执行的指令
    
    这两种策略都需要在处理器内部增加更多的逻辑组件和晶体管。



## 20　ASCII码和字符转换
1. 存储器中唯一可以存储的东西是bit
2. 如果我们想把一段文本存下来该怎么办呢？将文本表示成数字。
3. 可以为每一个字母赋予一个唯一的编码，具有这种功能的系统叫 字符编码集（Coded CharacterSet），系统内的每个独立编码称为字符编码（Character Codes）
4. 莫尔斯码: 常用字符的编码较短，而不常用字符的编码较长。这样的编码非常适合电报系统，但并不适用于计算机.
5. 对一个句子进行编码后得到的连续字符通常被称为文本字符串（string）
6. 电传打字机键盘上的每一个键实质上都起到了转换器的作用，它负责产生二进制编码并且通过输出电缆逐位传输出去
7. 尽管ASCII码是计算机领域最重要的标准,但是它是太美国化了，在其他国家ASCII码并不适用。
8. 近几十年来出现了许多不同版本的扩展的ASCII码，多个不同的版本严重影响了编码的一致性，导致了混淆和不兼容。ASCII码被扩展到极致，有的甚至可以对中文、日文和韩文进行编码
9. 从1988年开始，几大著名计算机公司合作研究出一种用来替代ASCII码的编码系统，取名为Unicode（统一化字符编码标准）。相对于ASCII的7位编码，Unicode采用了16位编码，每一个字符需要2个字节。
10. Unicode编码不是从零开始设计的，前128个字符编码——即0000h～007Fh——与ASCII码是一致的
12. 对于Unicode来讲，它唯一的问题，就是它改变了字符与存储空间之间“单字符，单字节”的等价对应关系。采用ASCII编码方式存储的著作《怒火之花》，其所占据的存储空间约为1 MB。而如果采用Unicode编码，约占2 MB。为了使编码系统兼容，Unicode在存储空间上付出了相应的代价。


> UTF-8是unicode的升级版，减少存储空间。

你看到的unicode字符集是这样的编码表：
```shell
I 0049
t 0074
' 0027
s 0073
  0020
知 77e5
乎 4e4e
日 65e5
报 62a5
```

每一个字符对应一个十六进制数字。计算机只懂二进制，因此，严格按照unicode的方式(UCS-2)，应该这样存储：
```shell
I 00000000 01001001
t 00000000 01110100
' 00000000 00100111
s 00000000 01110011
  00000000 00100000
知 01110111 11100101
乎 01001110 01001110
日 01100101 11100101
报 01100010 10100101
```

这个字符串总共占用了18个字节，但是对比中英文的二进制码，可以发现，英文前9位都是0！浪费啊，浪费硬盘，浪费流量。怎么办？UTF。

于是，”It's 知乎日报“就变成了：
```markdown
I 01001001
t 01110100
' 00100111
s 01110011
  00100000
知 11100111 10011111 10100101
乎 11100100 10111001 10001110
日 11100110 10010111 10100101
报 11100110 10001010 10100101
```
和上边的方案对比一下，英文短了，每个中文字符却多用了一个字节。但是整个字符串只用了17个字节，比上边的18个短了一点点。

![img_1.png](img_1.png)
## 参考

1. [编程：隐匿在计算机硬件背后的语言](https://weread.qq.com/web/reader/64e32bf071fd5a9164ece6b)
2. https://www.zhihu.com/question/23374078/answer/65352538
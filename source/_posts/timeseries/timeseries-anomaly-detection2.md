---
title: 时序异常检测的技术和应用_2
date: 2021-02-22 09:49:20
author: "chiechie"
subtitle: "给出具体的整体规划"
header-style: text
categories: 技术类
tags:
  - 时间序列
  - 统计
  - 量化交易
  - 异常检测
---

## 有经验的算法工程师怎么做异常检测？

考虑到实际情况，当建模人员接手了一堆监控指标，他怎么构建合理的监控方案呢？
大概思路是，第一步将提炼需求，第二步将需求映射为解决方案。

### 提炼需求
实际做异常检测时，常用的异常定义有两类：非正常的模式；非正常的模式中某种特殊的模式。前者应用场景比如监控，后者场景比如鉴黄。这两类需求都可以使用以下两个维度来描述：
1. 正常模式：
2. 异常模式：eg 黄色图像/健身图片/其他

另外，基于接入数据的元信息，可以直接进行标准化。
比如成功率指标，需求标准化为 ：

1. 正常模式：比率型曲线
2. 异常模式：下降类型的异常

### 找解决方案

解决方案大致分为几个类型
- 概率模型：高斯模型/...
- 时序预测：prophet/stl/DeepAR/...
- 有监督异常检测模型：样本标记 + 特征构造 +分类算法

从需求到方案的映射，采取过滤无效方案 + 对比评估的方式


## 平台方如何将算法人员的经验产品化？
先提出几个论断

### 几个论断

1. 需求和方案是多对多的关系：一个需求会对应1个或者多个解决方案；1个解决方案可能同时适合多个需求。
2. 定义曲线正常模式是一个多标签的问题。
3. 定义异常类型是一个多标签的问题。一个用户需求可能同时关注好几类异常。
4. 异常类型之间有联动关系，例如全局异常一定是局部异常。



### 需求标准化

需求标准化，就是将业务需求按照一套标准语言描述，可以从以下几个维度去描述:

- 曲线的正常模式：多标签，每个维度给出一个分值，相当于画像
  - 连续性: 连续型/有规律间断/无规律间断
  - 周期性：daily/weekly/无周期性/其他周期
  - 趋势型：平稳型/线性趋势/S型/其他类型
  - 其他类型：
- 曲线的异常模式：多标签，可选1个或者多个
  - 全局异常（Global Outliers）：上升/下降
  - 上下文异常（Contextual Outliers）：突变点/违背周期性&上升/下降
  - 序列异常（Collective Outliers， 单个点不异常，放到一起就很异常）：片段波动率异常/...
  - 趋势异常：趋势超过某个thresh
  - 其他类型的异常：
- 工程需求：
  - 支持冷启动: 历史数据不够，要求快速检测
  - 没有标记样本：
  - 低延时：


### 解决方案映射

对于特定的需求，给一个可选方案的范围，排除明显不合适的方案。
但是哪个方案最优呢？平台要提供自动化的评估方法，比如注入异常，提供标准化的评估数据。---这个要再深入调研下

https://docs.qq.com/sheet/DVFhYcVJyaWtrWllr?tab=BB08J2

![curve_adapter.png](/images/curve_adapter.png)


## 最终的整体方案
暂无

